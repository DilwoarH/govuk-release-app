<% content_for :page_title, "#{@application.name} stats" %>

<div class="release-header">
  <%= render "govuk_publishing_components/components/breadcrumbs", {
    breadcrumbs: [
      root_crumb,
      application_node_crumb(application: @application),
      {
        title: "#{@application.name} stats"
      }
    ]
  } %>
  <%= render "govuk_publishing_components/components/title", {
    title: "#{@application.name} stats",
    context: @application.shortname,
    margin_bottom: 0
  } %>
  <%= render partial: "provider_badge", locals: { application: @application } %>
</div>

<ul class="tabs">
  <li>
    <%= link_to "Deploy status", @application %>
  </li>
  <li>
    <%= link_to "Edit", edit_application_path(@application) %>
  </li>
  <li>
    <%= link_to "Recent deployments", application_deployments_path(@application) %>
  </li>
  <li class="active">
    <%= link_to "Stats", stats_application_path(@application) %>
  </li>
</ul>

<div class="release__stats">
  <%= render "govuk_publishing_components/components/heading", {
    text: "Deployments per month",
    heading_level: 2,
    margin_bottom: 4,
  } %>

  <%= line_chart @stats.per_month, width: "100%", height: "450px", legend: false, download: true %>
</div>

<div class="release__stats">
  <%= render "govuk_publishing_components/components/heading", {
    text: "Deployments per year",
    heading_level: 2,
    margin_bottom: 4,
  } %>

  <%= column_chart @stats.per_year, width: "100%", height: "250px", legend: false, download: true %>
</div>
